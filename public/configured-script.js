if (typeof Convkit !== 'object') { var Convkit = {}; Convkit.init = function () { this.options = JSON.parse('{ "urls": { "addToCart": "http://convkit.local:8080", "favorite": "http://convkit.local:8080", "purchase": "http://convkit.local:8080", "show": "http://convkit.local:8080" } }'); this.attachEventListeners(); }; Convkit.attachEventListeners = function () { document.querySelectorAll('[data-convkit-id]').forEach(function (element) { element.addEventListener('click', this.addToCart.bind(this, element)); }.bind(this)); }; Convkit.addToCart = function () { var xhr = new XMLHttpRequest(); xhr.open('POST', this.options.urls.addToCart, true); xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded'); xhr.send('product-id=' + element.getAttribute('data-convkit-id') + '&eventType=addToCart'); }; Convkit.init() }
